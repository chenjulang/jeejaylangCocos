{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\super/assets\\scripts\\super\\MatchManager.js"],"names":["Constants","require","STAND","cc","Class","extends","Component","onLoad","log","io","url","on","data","console","G","queueSocket","stand","BLACK","WHITE","roomId","roomSocket","disconnect","director","loadScene","onBtnCancel"],"mappings":";;;;;;AAAA,IAAMA,YAAYC,QAAQ,WAAR,CAAlB;AACA,IAAMC,QAAQF,UAAUE,KAAxB;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,YAAQ,kBAAY;AAChBJ,WAAGK,GAAH,CAAOC,EAAP;AACA;AACA;AACA,YAAIC,MAAM,kCAAV;;AAIAD,aAAKE,EAAL,CAAQ,cAAR,EAAwB,UAAUC,IAAV,EAAgB;AACpCC,oBAAQL,GAAR,CAAY,oBAAZ;AACH,SAFD;;AAIAM,UAAEC,WAAF,GAAgBN,GAAGC,MAAI,QAAP,EAAiB,EAAE,wBAAwB,IAA1B,EAAjB,CAAhB;AACAI,UAAEC,WAAF,CAAcJ,EAAd,CAAiB,WAAjB,EAA8B,UAAUK,KAAV,EAAiB;AAC3C,gBAAIA,UAAU,OAAd,EAAuB;AACnBF,kBAAEE,KAAF,GAAUd,MAAMe,KAAhB;AACH,aAFD,MAEO,IAAID,UAAU,OAAd,EAAuB;AAC1BF,kBAAEE,KAAF,GAAUd,MAAMgB,KAAhB;AACH;AACJ,SAND;AAOAJ,UAAEC,WAAF,CAAcJ,EAAd,CAAiB,eAAjB,EAAkC,UAAUQ,MAAV,EAAkB;AAChDhB,eAAGK,GAAH,CAAO,kBAAkBW,MAAzB;AACAL,cAAEM,UAAF,GAAeX,GAAGC,MAAI,QAAJ,GAAeS,MAAlB,EAA0B,EAAE,wBAAwB,IAA1B,EAA1B,CAAf;AACAL,cAAEC,WAAF,CAAcM,UAAd;AACAlB,eAAGmB,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH,SALD;AAMH,KA7BI;;AA+BLC,eA/BK,yBA+BS;AACVV,UAAEC,WAAF,CAAcM,UAAd;AACAlB,WAAGmB,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH;AAlCI,CAAT","file":"MatchManager.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\super","sourcesContent":["const Constants = require('Constants');\nconst STAND = Constants.STAND;\ncc.Class({\n    extends: cc.Component,\n\n    onLoad: function () {\n        cc.log(io);\n        // var url = '127.0.0.1:5050';\n        // var url = '';\n        var url = 'http://jeejaylang13.applinzi.com';\n\n\n\n        io().on('cocos linked', function (data) {\n            console.log('接受到服务器cocos linked')\n        });\n\n        G.queueSocket = io(url+'/queue', { 'force new connection': true });\n        G.queueSocket.on('set stand', function (stand) {\n            if (stand === 'black') {\n                G.stand = STAND.BLACK;\n            } else if (stand === 'white') {\n                G.stand = STAND.WHITE;\n            }\n        });\n        G.queueSocket.on('match success', function (roomId) {\n            cc.log('match success' + roomId);\n            G.roomSocket = io(url+'/rooms' + roomId, { 'force new connection': true });\n            G.queueSocket.disconnect();\n            cc.director.loadScene('game');\n        });\n    },\n\n    onBtnCancel() {\n        G.queueSocket.disconnect();\n        cc.director.loadScene('menu');\n    }\n});\n"]}